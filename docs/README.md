# CAN Reader - Scanmatic 2 Pro

Кроссплатформенное приложение на C++/Qt для работы с CAN шиной через адаптер Scanmatic 2 Pro.

## Возможности

- Подключение к адаптеру Scanmatic 2 Pro через последовательный порт
- Выбор скорости CAN линии (250 или 500 кбит/с)
- Отправка CAN сообщений
- Прием и отображение CAN сообщений в реальном времени
- Логирование всех операций с временными метками
- Кроссплатформенность (Windows и Linux)

## Требования

### Windows
- Qt 6.x (Core, Widgets, SerialPort)
- CMake 3.16 или выше
- Компилятор с поддержкой C++17 (MSVC, MinGW)

### Linux
- Qt 6.x (Core, Widgets, SerialPort)
- CMake 3.16 или выше
- Компилятор с поддержкой C++17 (GCC, Clang)
- Права доступа к последовательным портам (добавьте пользователя в группу `dialout` или `uucp`)

## Сборка

### Windows

1. Установите Qt 6.x и добавьте его в PATH
2. Откройте командную строку в директории проекта
3. Выполните:

```bash
mkdir build
cd build
cmake ..
cmake --build . --config Release
```

Исполняемый файл будет в папке `build/Release/` (или `build/` для MinGW).

### Linux

1. Установите зависимости:

```bash
# Ubuntu/Debian
sudo apt-get install qt6-base-dev qt6-base-dev-tools libqt6serialport6-dev cmake build-essential

# Fedora
sudo dnf install qt6-qtbase-devel qt6-qtserialport-devel cmake gcc-c++
```

2. Соберите проект:

```bash
mkdir build
cd build
cmake ..
make
```

3. Для доступа к последовательным портам на Linux (если требуется):

```bash
sudo usermod -a -G dialout $USER
# После этого перелогиньтесь
```

Исполняемый файл будет в папке `build/`.

## Использование

1. Подключите адаптер Scanmatic 2 Pro к компьютеру
2. Запустите программу
3. Выберите последовательный порт из выпадающего списка
   - На Windows: COM1, COM2, COM3 и т.д.
   - На Linux: ttyUSB0, ttyACM0, ttyS0 и т.д.
4. Выберите скорость CAN линии (250 или 500 кбит/с)
5. Нажмите "Подключиться"
6. Для отправки сообщения:
   - Введите CAN ID в шестнадцатеричном формате (например: `123` или `1A3`)
   - Введите данные в шестнадцатеричном формате через пробел (например: `01 02 03 04`)
   - Нажмите "Отправить"
7. Все входящие и исходящие сообщения будут отображаться в окне лога

## Формат данных

- **CAN ID**: Шестнадцатеричное число от 0 до FFFFFFFF (без префикса 0x)
- **Данные**: От 0 до 8 байт в шестнадцатеричном формате, разделенные пробелами
  - Пример: `01 02 03 04 05 06 07 08`
  - Пример: `AA BB CC`

## Протокол Scanmatic 2 Pro

Программа использует протокол обмена данными с адаптером Scanmatic 2 Pro:
- Кадр начинается с байта `0xAA`
- Тип кадра для CAN данных: `0x02`
- Кадр заканчивается байтом `0x55`
- CAN ID передается как 4 байта (big-endian)

## Примечания

- Убедитесь, что драйверы для Scanmatic 2 Pro установлены
- На Linux может потребоваться настройка прав доступа к последовательным портам
- Скорость последовательного порта автоматически устанавливается в зависимости от выбранной скорости CAN

## Лицензия

Этот проект предоставляется "как есть" для использования с адаптером Scanmatic 2 Pro.

